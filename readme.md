# Catalog API microservice

## Добавление зависимостей
```bash
dotnet add package "Carter" --version "9.0.0" 
dotnet add package "Marten" --version "7.39.3" 
dotnet add package "Mapster" --version "7.4.0" 
dotnet add package "FluentValidation" --version "11.11.0" 
dotnet add package "FluentValidation.AspNetCore" --version "11.3.0" 
dotnet add package "FluentValidation.DependencyInjectionExtensions" --version "11.11.0" 
dotnet add package "MediatR" --version "12.4.1" 
```

## CQRS (Command Query Responsibility Segregation)

CQRS — это архитектурный паттерн, который разделяет ответственность за обработку команд (изменений состояния) и выполнение запросов (чтения данных). Этот подход часто используется в системах, где важно эффективно управлять сложной бизнес-логикой и обеспечивать высокую производительность.

### Основная идея CQRS

#### Команды (Commands):
- Отвечают за изменение состояния системы
- Например, создание топика или добавление комментария в социальной сети
- Команды обрабатываются через доменные модели, такие как агрегаты, которые обеспечивают соблюдение бизнес-правил

#### Запросы (Queries):
- Отвечают за чтение данных
- Например, получение списка топиков содержащих комментарии для отображения пользователю
- Запросы обычно работают с оптимизированными для чтения моделями данных, которые могут отличаться от моделей, используемых для команд

### Зачем нужен CQRS?

1. **Разделение ответственности:**
   - Разделение чтения и записи упрощает код и делает его более понятным. Логика изменения состояния сосредоточена в одной части системы, а логика чтения — в другой

2. **Оптимизация производительности:**
   - Для запросов можно использовать специализированные модели данных (например, денормализованные таблицы или кэши), что ускоряет операции чтения без влияния на операции записи

3. **Масштабируемость:**
   - Чтение и запись можно масштабировать независимо друг от друга. Например, если система испытывает большую нагрузку на запросы (чтение), можно оптимизировать только эту часть

4. **Упрощение сложной логики:**
   - В системах с насыщенной бизнес-логикой CQRS помогает изолировать изменения состояния от операций чтения, что снижает вероятность ошибок и упрощает тестирование

### Разделённый код с CQRS

После применения CQRS методы для чтения данных (запросы) и изменения состояния (команды) разделяются на разные классы или слои.

#### Команды (Commands)

Команды представляют намерение изменить состояние системы.

#### Запросы (Queries)

Запросы отвечают за получение данных без изменения состояния
